(()=>{var e={};e.id=784,e.ids=[784],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},11760:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.ZP,__next_app__:()=>u,originalPathname:()=>l,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=r(50482),a=r(69108),n=r(83543),i=r(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["(Protected)",{children:["panel",{children:["(AdminSetting)",{children:["setting",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,53302)),"/home/wn-061/Arsalan/Image-demo/src/app/(Protected)/panel/(AdminSetting)/setting/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,66579)),"/home/wn-061/Arsalan/Image-demo/src/app/(Protected)/panel/(AdminSetting)/setting/layout.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,84591)),"/home/wn-061/Arsalan/Image-demo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,48206)),"/home/wn-061/Arsalan/Image-demo/src/app/not-found.tsx"]}],c=["/home/wn-061/Arsalan/Image-demo/src/app/(Protected)/panel/(AdminSetting)/setting/page.tsx"],l="/(Protected)/panel/(AdminSetting)/setting/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(Protected)/panel/(AdminSetting)/setting/page",pathname:"/panel/setting",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},71700:(e,t,r)=>{let s={"6777bc6c35c6560d6c43f18d1a5ad296bc08d8da":()=>Promise.resolve().then(r.bind(r,2797)).then(e=>e.default)};async function a(e,...t){return(await s[e]()).apply(null,t)}e.exports={"6777bc6c35c6560d6c43f18d1a5ad296bc08d8da":a.bind(null,"6777bc6c35c6560d6c43f18d1a5ad296bc08d8da")}},55752:(e,t,r)=>{Promise.resolve().then(r.bind(r,18877))},18877:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(95344),a=r(50909),n=r(46540),i=r(7361);r(13664);let d=(0,r(28371).$)("6777bc6c35c6560d6c43f18d1a5ad296bc08d8da");var o=r(81202),c=r(34755),l=r(3729),u=r(5094),m=r(42739);function p(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium",children:"Credential"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter new username and password to change admin credentials"})]}),s.jsx(a.Separator,{}),s.jsx(x,{})]})}function x(){let[e,t]=(0,o.useFormState)(d,null);return(0,l.useEffect)(()=>{e?.success?c.A.success(`${e.success}`):e?.error?c.A.error(e?.error):e?.info&&c.A.info(e?.info)},[e]),(0,s.jsxs)("form",{className:"space-y-4",action:t,children:[(0,s.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[s.jsx(i._,{htmlFor:"username",children:"Username"}),s.jsx(n.I,{type:"username",name:"username",id:"username",placeholder:"username",required:!0})]}),(0,s.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[s.jsx(i._,{htmlFor:"password",children:"Password"}),s.jsx(n.I,{type:"password",name:"password",id:"password",placeholder:"*******",required:!0})]}),s.jsx("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:s.jsx(h,{title:"Update"})})]})}let h=({title:e})=>{let{pending:t}=(0,o.useFormStatus)();return s.jsx(u.z,{className:"w-full",type:"submit",disabled:t,children:t?(0,s.jsxs)(s.Fragment,{children:[s.jsx(m.Z,{className:"animate-spin h-5 w-5 mr-2"})," Loading..."]}):e})}},7361:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(95344),a=r(3729),n=r(14217),i=r(88720),d=r(11453);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},r)=>s.jsx(n.f,{ref:r,className:(0,d.cn)(o(),e),...t}));c.displayName=n.f.displayName},2797:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(98601);r(75811);var a=r(30634),n=r.n(a),i=r(95866),d=r(15728),o=r(89277),c=r(46893);async function l(e,t){let r=await (0,i.auth)();try{let e=d.authSchema.safeParse({username:t.get("username"),password:t.get("password")});if(!e.success)return{error:"Must be 5 characters long"};let{username:s,password:a}=e.data,i=await n().hash(a,10),c=await o.db.user.findUnique({where:{id:r?.user?.name}});if(!c)return{error:"Admin does not exist"};let l=await n().compare(a,c.passwordHash);if(c.username===s&&l)return{info:"Previous credentials cannot be updated."};return await o.db.user.update({where:{id:r?.user?.name},data:{username:s,passwordHash:i}}),{success:"Successfully updated credentials."}}catch(e){return console.error("Failed to update credentials:",e),{error:"Failed to update credentials."}}}let u=l;(0,c.ensureServerEntryExports)([l]),(0,s.createActionProxy)("6777bc6c35c6560d6c43f18d1a5ad296bc08d8da",l)},26999:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(11735),a=r(76714),n=r(15728),i=r(30634),d=r.n(i);let o={providers:[(0,a.default)({async authorize(e){let t=n.authSchema.safeParse(e);if(t.success){let{username:e,password:r}=t.data,a=await (0,s.getUserByUsername)(e);if(!a||!a.passwordHash)return null;if(await d().compare(r,a.passwordHash))return{id:a.id,name:a.username}}return null}})]}},95866:(e,t,r)=>{"use strict";r.d(t,{auth:()=>c,signIn:()=>l,signOut:()=>u});var s=r(29538),a=r(26999),n=r(28388),i=r(89277);let{handlers:{GET:d,POST:o},auth:c,signIn:l,signOut:u}=(0,s.default)({adapter:(0,n.PrismaAdapter)(i.db),session:{strategy:"jwt"},...a.default})},53302:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let s=(0,r(86843).createProxy)(String.raw`/home/wn-061/Arsalan/Image-demo/src/app/(Protected)/panel/(AdminSetting)/setting/page.tsx`),{__esModule:a,$$typeof:n}=s,i=s.default},11735:(e,t,r)=>{"use strict";r.d(t,{getUserByUsername:()=>a});var s=r(89277);let a=async e=>{try{return await s.db.user.findUnique({where:{username:e}})}catch{return null}}},15728:(e,t,r)=>{"use strict";r.d(t,{authSchema:()=>a});var s=r(86412);let a=s.z.object({username:s.z.string().min(5,{message:"min 5 character"}),password:s.z.string().min(5,{message:"min 5 character"})})},14217:(e,t,r)=>{"use strict";r.d(t,{f:()=>i});var s=r(65651),a=r(3729),n=r(62409);let i=(0,a.forwardRef)((e,t)=>(0,a.createElement)(n.WV.label,(0,s.Z)({},e,{ref:t,onMouseDown:t=>{var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,303,241,338,807,345,168,954,835],()=>r(11760));module.exports=s})();