"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/(Backend)/api/posts/route";
exports.ids = ["app/(Backend)/api/posts/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2F(Backend)%2Fapi%2Fposts%2Froute&page=%2F(Backend)%2Fapi%2Fposts%2Froute&appPaths=&pagePath=private-next-app-dir%2F(Backend)%2Fapi%2Fposts%2Froute.ts&appDir=%2Fhome%2Fwn-061%2FArsalan%2FImage-demo-july3%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fwn-061%2FArsalan%2FImage-demo-july3&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2F(Backend)%2Fapi%2Fposts%2Froute&page=%2F(Backend)%2Fapi%2Fposts%2Froute&appPaths=&pagePath=private-next-app-dir%2F(Backend)%2Fapi%2Fposts%2Froute.ts&appDir=%2Fhome%2Fwn-061%2FArsalan%2FImage-demo-july3%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fwn-061%2FArsalan%2FImage-demo-july3&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_wn_061_Arsalan_Image_demo_july3_src_app_Backend_api_posts_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/(Backend)/api/posts/route.ts */ \"(rsc)/./src/app/(Backend)/api/posts/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/(Backend)/api/posts/route\",\n        pathname: \"/api/posts\",\n        filename: \"route\",\n        bundlePath: \"app/(Backend)/api/posts/route\"\n    },\n    resolvedPagePath: \"/home/wn-061/Arsalan/Image-demo-july3/src/app/(Backend)/api/posts/route.ts\",\n    nextConfigOutput,\n    userland: _home_wn_061_Arsalan_Image_demo_july3_src_app_Backend_api_posts_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/(Backend)/api/posts/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkYoQmFja2VuZCklMkZhcGklMkZwb3N0cyUyRnJvdXRlJnBhZ2U9JTJGKEJhY2tlbmQpJTJGYXBpJTJGcG9zdHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkYoQmFja2VuZCklMkZhcGklMkZwb3N0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGd24tMDYxJTJGQXJzYWxhbiUyRkltYWdlLWRlbW8tanVseTMlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZ3bi0wNjElMkZBcnNhbGFuJTJGSW1hZ2UtZGVtby1qdWx5MyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwQjtBQUN2RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8vP2JmMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2hvbWUvd24tMDYxL0Fyc2FsYW4vSW1hZ2UtZGVtby1qdWx5My9zcmMvYXBwLyhCYWNrZW5kKS9hcGkvcG9zdHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvKEJhY2tlbmQpL2FwaS9wb3N0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Bvc3RzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwLyhCYWNrZW5kKS9hcGkvcG9zdHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS93bi0wNjEvQXJzYWxhbi9JbWFnZS1kZW1vLWp1bHkzL3NyYy9hcHAvKEJhY2tlbmQpL2FwaS9wb3N0cy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiLyhCYWNrZW5kKS9hcGkvcG9zdHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2F(Backend)%2Fapi%2Fposts%2Froute&page=%2F(Backend)%2Fapi%2Fposts%2Froute&appPaths=&pagePath=private-next-app-dir%2F(Backend)%2Fapi%2Fposts%2Froute.ts&appDir=%2Fhome%2Fwn-061%2FArsalan%2FImage-demo-july3%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fwn-061%2FArsalan%2FImage-demo-july3&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/(Backend)/api/posts/route.ts":
/*!**********************************************!*\
  !*** ./src/app/(Backend)/api/posts/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.tsx\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\n//////////////////////////////////////////\n////////////// formData //////////////////\n//////////////////////////////////////////\nasync function POST(request) {\n    const authorizationHeader = request.headers.get(\"Authorization\");\n    if (!authorizationHeader || !authorizationHeader.startsWith(\"Bearer \")) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            info: \"Unauthorized: Bearer token missing or invalid\"\n        }, {\n            status: 401\n        });\n    }\n    const bearerToken = authorizationHeader.substring(7); // Remove \"Bearer \" prefix\n    // Example of a simple check\n    if (bearerToken !== \"uKkBUm36l8U=w2C_v!@\") {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            info: \"Unauthorized: Invalid Bearer token\"\n        }, {\n            status: 401\n        });\n    }\n    // Image handling (replace with your preferred storage solution)\n    const formData = await request.formData();\n    const title = formData.get(\"title\");\n    const description = formData.get(\"description\");\n    const categoryId = formData.get(\"category\");\n    const tag = formData.get(\"tag\");\n    const tagArry = tag.split(\",\");\n    const image = formData.get(\"image\");\n    const section = formData.get(\"section\");\n    const imageName = `${Date.now()}-${image.name}`;\n    try {\n        const dirPath = `public/uploads/posts/`;\n        await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().mkdir(dirPath, {\n            recursive: true\n        });\n        await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().writeFile(`${dirPath}${imageName}`, image.stream());\n    } catch (error) {\n        console.error(error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            message: \"Image upload failed\"\n        }, {\n            status: 400\n        });\n    }\n    function generateId(title) {\n        const formattedTitle = title.replace(/\\s+/g, \"-\");\n        const uuid = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        return `${formattedTitle}-${uuid.substring(0, 8)}`;\n    }\n    const id = generateId(title);\n    const post = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db.posts.create({\n        data: {\n            id,\n            title,\n            description,\n            category: {\n                connect: {\n                    id: categoryId\n                }\n            },\n            imageUrl: `/uploads/posts/${imageName}`,\n            postTags: {\n                connectOrCreate: tagArry.map((tag)=>({\n                        where: {\n                            id: tag\n                        },\n                        create: {\n                            tagId: tag\n                        }\n                    }))\n            }\n        },\n        include: {\n            postTags: true\n        }\n    });\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n        success: \"post created successfully\"\n    }, {\n        status: 201\n    });\n}\nasync function GET(request) {\n    try {\n        // Extract Bearer token from the Authorization header\n        const authorizationHeader = request.headers.get(\"Authorization\");\n        if (!authorizationHeader || !authorizationHeader.startsWith(\"Bearer \")) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n                info: \"Unauthorized: Bearer token missing or invalid\"\n            }, {\n                status: 401\n            });\n        }\n        const bearerToken = authorizationHeader.substring(7); // Remove \"Bearer \" prefix\n        // Example of a simple check\n        if (bearerToken !== \"uKkBUm36l8U=w2C_v!@\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n                info: \"Unauthorized: Invalid Bearer token\"\n            }, {\n                status: 401\n            });\n        }\n        const posts = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db.posts.findMany({\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            include: {\n                category: true,\n                postTags: true\n            }\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            posts,\n            success: \"Posts retrieved successfully\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.log(error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            error: \"Something went wrong\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request) {\n    const authorizationHeader = request.headers.get(\"Authorization\");\n    if (!authorizationHeader || !authorizationHeader.startsWith(\"Bearer \")) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            info: \"Unauthorized: Bearer token missing or invalid\"\n        }, {\n            status: 401\n        });\n    }\n    const bearerToken = authorizationHeader.substring(7); // Remove \"Bearer \" prefix\n    // Example of a simple check\n    if (bearerToken !== \"uKkBUm36l8U=w2C_v!@\") {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            info: \"Unauthorized: Invalid Bearer token\"\n        }, {\n            status: 401\n        });\n    }\n    const formData = await request.formData();\n    const id = formData.get(\"id\");\n    const title = formData.get(\"title\");\n    const description = formData.get(\"description\");\n    const categoryId = formData.get(\"category\");\n    const tagss = formData.get(\"tag\");\n    const tags = tagss.split(\",\");\n    const image = formData.get(\"image\");\n    const section = formData.get(\"section\"); // Use Next.js built-in formData()\n    const existingItem = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db.posts.findUnique({\n        where: {\n            id\n        }\n    });\n    const imageName = `${Date.now()}-${image.name}`; // Unique filename\n    try {\n        // Create the 'posts' directory if it doesn't exist\n        const dirPath = `public/uploads/posts/`;\n        await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().mkdir(dirPath, {\n            recursive: true\n        });\n        // Save the image to the 'posts' directory\n        await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().writeFile(`${dirPath}${imageName}`, image.stream());\n    } catch (error) {\n        console.error(error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            message: \"Image upload failed\"\n        }, {\n            status: 400\n        });\n    }\n    try {\n        const post = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db.posts.update({\n            where: {\n                id\n            },\n            data: {\n                title,\n                description,\n                category: {\n                    connect: {\n                        id: categoryId\n                    }\n                },\n                imageUrl: `/uploads/posts/${imageName}`,\n                postTags: {\n                    connectOrCreate: tags.map((tag)=>({\n                            where: {\n                                id: tag\n                            },\n                            create: {\n                                tagId: tag\n                            }\n                        }))\n                }\n            },\n            include: {\n                postTags: true\n            }\n        });\n        const prevImg = existingItem?.imageUrl;\n        await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().unlink(`public${prevImg}`);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            post: post,\n            success: \"Post update successfully\"\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.log(error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            error: \"Something went wrong\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        // Extract Bearer token from the Authorization header\n        const authorizationHeader = request.headers.get(\"Authorization\");\n        if (!authorizationHeader || !authorizationHeader.startsWith(\"Bearer \")) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n                message: \"Unauthorized: Bearer token missing or invalid\"\n            }, {\n                status: 401\n            });\n        }\n        const bearerToken = authorizationHeader.substring(7); // Remove \"Bearer \" prefix\n        // TODO: Implement token validation logic, for example, using a JWT library or checking against a database.\n        // Example of a simple check\n        if (bearerToken !== \"uKkBUm36l8U=w2C_v!@\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n                message: \"Unauthorized: Invalid Bearer token\"\n            }, {\n                status: 401\n            });\n        }\n        // Now you can use the 'bearerToken' in your API logic\n        // Assuming you have a 'db' object for database access.\n        const formData = await request.formData();\n        const id = formData.get(\"id\");\n        const postToDelete = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db.posts.findUnique({\n            where: {\n                id\n            },\n            include: {\n                postTags: true\n            }\n        });\n        if (postToDelete && postToDelete.postTags.length > 0) {\n            await Promise.all(postToDelete.postTags.map((tag)=>_lib_db__WEBPACK_IMPORTED_MODULE_0__.db.postTag.delete({\n                    where: {\n                        id: tag.id\n                    }\n                })));\n        }\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db.posts.delete({\n            where: {\n                id\n            }\n        }); // Delete the post after handling tags\n        const prevImg = postToDelete?.imageUrl;\n        await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().unlink(`public${prevImg}`);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            success: \"Posts deleted successfully\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.log(error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            error: \"Something went wrong\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwLyhCYWNrZW5kKS9hcGkvcG9zdHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQThCO0FBQzBCO0FBQzNCO0FBQ087QUFFbEMsMENBQTBDO0FBQzNDLDBDQUEwQztBQUMzQywwQ0FBMEM7QUFFbkMsZUFBZUssS0FBS0MsT0FBb0I7SUFDN0MsTUFBTUMsc0JBQXNCRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUNoRCxJQUFJLENBQUNGLHVCQUF1QixDQUFDQSxvQkFBb0JHLFVBQVUsQ0FBQyxZQUFZO1FBQ3RFLE9BQU9ULGtGQUFZQSxDQUFDVSxJQUFJLENBQ3RCO1lBQUVDLE1BQU07UUFBZ0QsR0FDeEQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBRUEsTUFBTUMsY0FBY1Asb0JBQW9CUSxTQUFTLENBQUMsSUFBSSwwQkFBMEI7SUFFaEYsNEJBQTRCO0lBQzVCLElBQUlELGdCQUFnQix1QkFBdUI7UUFDekMsT0FBT2Isa0ZBQVlBLENBQUNVLElBQUksQ0FDdEI7WUFBRUMsTUFBTTtRQUFxQyxHQUM3QztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7SUFFQSxnRUFBZ0U7SUFDaEUsTUFBTUcsV0FBVyxNQUFNVixRQUFRVSxRQUFRO0lBQ3ZDLE1BQU1DLFFBQVFELFNBQVNQLEdBQUcsQ0FBQztJQUMzQixNQUFNUyxjQUFjRixTQUFTUCxHQUFHLENBQUM7SUFDakMsTUFBTVUsYUFBYUgsU0FBU1AsR0FBRyxDQUFDO0lBQ2hDLE1BQU1XLE1BQU1KLFNBQVNQLEdBQUcsQ0FBQztJQUN6QixNQUFNWSxVQUFVRCxJQUFJRSxLQUFLLENBQUM7SUFDMUIsTUFBTUMsUUFBUVAsU0FBU1AsR0FBRyxDQUFDO0lBQzNCLE1BQU1lLFVBQVVSLFNBQVNQLEdBQUcsQ0FBQztJQUU3QixNQUFNZ0IsWUFBWSxDQUFDLEVBQUVDLEtBQUtDLEdBQUcsR0FBRyxDQUFDLEVBQUVKLE1BQU1LLElBQUksQ0FBQyxDQUFDO0lBQy9DLElBQUk7UUFD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VUcsY0FBY3RCO1FBQzlCLE1BQU05Qyx5REFBUyxDQUFDLENBQUMsTUFBTSxFQUFFaUUsUUFBUSxDQUFDO1FBRWxDLE9BQU9sRSxrRkFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUNFNEMsU0FBUztRQUNYLEdBQ0E7WUFBRTFDLFFBQVE7UUFBSTtJQUVsQixFQUFFLE9BQU9xQixPQUFPO1FBQ2RDLFFBQVF5QixHQUFHLENBQUMxQjtRQUNaLE9BQU9qQyxrRkFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUFFdUIsT0FBTztRQUF1QixHQUNoQztZQUFFckIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZW1vLy4vc3JjL2FwcC8oQmFja2VuZCkvYXBpL3Bvc3RzL3JvdXRlLnRzP2UyZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9saWIvZGJcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gLy8vLy8vLy8vLy8vLy8gZm9ybURhdGEgLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgYXV0aG9yaXphdGlvbkhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJBdXRob3JpemF0aW9uXCIpO1xuICBpZiAoIWF1dGhvcml6YXRpb25IZWFkZXIgfHwgIWF1dGhvcml6YXRpb25IZWFkZXIuc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGluZm86IFwiVW5hdXRob3JpemVkOiBCZWFyZXIgdG9rZW4gbWlzc2luZyBvciBpbnZhbGlkXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICk7XG4gIH1cblxuICBjb25zdCBiZWFyZXJUb2tlbiA9IGF1dGhvcml6YXRpb25IZWFkZXIuc3Vic3RyaW5nKDcpOyAvLyBSZW1vdmUgXCJCZWFyZXIgXCIgcHJlZml4XG5cbiAgLy8gRXhhbXBsZSBvZiBhIHNpbXBsZSBjaGVja1xuICBpZiAoYmVhcmVyVG9rZW4gIT09IFwidUtrQlVtMzZsOFU9dzJDX3YhQFwiKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBpbmZvOiBcIlVuYXV0aG9yaXplZDogSW52YWxpZCBCZWFyZXIgdG9rZW5cIiB9LFxuICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgKTtcbiAgfVxuXG4gIC8vIEltYWdlIGhhbmRsaW5nIChyZXBsYWNlIHdpdGggeW91ciBwcmVmZXJyZWQgc3RvcmFnZSBzb2x1dGlvbilcbiAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKCk7XG4gIGNvbnN0IHRpdGxlID0gZm9ybURhdGEuZ2V0KFwidGl0bGVcIikgYXMgc3RyaW5nO1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IGZvcm1EYXRhLmdldChcImRlc2NyaXB0aW9uXCIpIGFzIHN0cmluZztcbiAgY29uc3QgY2F0ZWdvcnlJZCA9IGZvcm1EYXRhLmdldChcImNhdGVnb3J5XCIpIGFzIHN0cmluZztcbiAgY29uc3QgdGFnID0gZm9ybURhdGEuZ2V0KFwidGFnXCIpIGFzIHN0cmluZztcbiAgY29uc3QgdGFnQXJyeSA9IHRhZy5zcGxpdChcIixcIik7XG4gIGNvbnN0IGltYWdlID0gZm9ybURhdGEuZ2V0KFwiaW1hZ2VcIikgYXMgYW55O1xuICBjb25zdCBzZWN0aW9uID0gZm9ybURhdGEuZ2V0KFwic2VjdGlvblwiKSBhcyBhbnk7XG5cbiAgY29uc3QgaW1hZ2VOYW1lID0gYCR7RGF0ZS5ub3coKX0tJHtpbWFnZS5uYW1lfWA7XG4gIHRyeSB7XG4gICAgY29uc3QgZGlyUGF0aCA9IGBwdWJsaWMvdXBsb2Fkcy9wb3N0cy9gO1xuICAgIGF3YWl0IGZzLm1rZGlyKGRpclBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuXG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKGAke2RpclBhdGh9JHtpbWFnZU5hbWV9YCwgaW1hZ2Uuc3RyZWFtKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogXCJJbWFnZSB1cGxvYWQgZmFpbGVkXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBnZW5lcmF0ZUlkKHRpdGxlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBmb3JtYXR0ZWRUaXRsZSA9IHRpdGxlLnJlcGxhY2UoL1xccysvZywgXCItXCIpO1xuICAgIGNvbnN0IHV1aWQgPSB1dWlkdjQoKTtcbiAgICByZXR1cm4gYCR7Zm9ybWF0dGVkVGl0bGV9LSR7dXVpZC5zdWJzdHJpbmcoMCwgOCl9YDtcbiAgfVxuXG4gIGNvbnN0IGlkID0gZ2VuZXJhdGVJZCh0aXRsZSk7XG4gIGNvbnN0IHBvc3QgPSBhd2FpdCBkYi5wb3N0cy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkLFxuICAgICAgdGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIGNhdGVnb3J5OiB7IGNvbm5lY3Q6IHsgaWQ6IGNhdGVnb3J5SWQgfSB9LFxuICAgICAgaW1hZ2VVcmw6IGAvdXBsb2Fkcy9wb3N0cy8ke2ltYWdlTmFtZX1gLCAvLyBJbWFnZSBVUkwgcGF0aFxuXG4gICAgICBwb3N0VGFnczoge1xuICAgICAgICBjb25uZWN0T3JDcmVhdGU6IHRhZ0FycnkubWFwKCh0YWcpID0+ICh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHRhZyB9LFxuICAgICAgICAgIGNyZWF0ZTogeyB0YWdJZDogdGFnIH0sXG4gICAgICAgIH0pKSxcbiAgICAgIH0sXG5cbiAgICAgIC8vIGNhdGVnb3J5OnsgY29ubmVjdDogeyBpZDogY2F0ZWdvcnlJZCB9LFxuICAgICAgLy8gICBzbHVnOiBcImJvZHkuU2x1Z1wiLCAvLyBNb2RpZnkgYXMgbmVlZGVkIChlLmcuLCBnZW5lcmF0ZSBzbHVnIGZyb20gdGl0bGUpXG4gICAgICAvLyBjYXRlZ29yeTp7IGNvbm5lY3Q6IHsgaWQ6IGNhdGVnb3J5SWQgfSxcbiAgICAgIC8vICAgYXJ0aWNsZXM6IFwiYm9keS5BcnRpY2xlXCIsIC8vIFVwZGF0ZSBiYXNlZCBvbiB5b3VyIGRhdGEgc3RydWN0dXJlXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7IHBvc3RUYWdzOiB0cnVlIH0sIC8vIEluY2x1ZGUgY29ubmVjdGVkIHRhZ3NcbiAgfSk7XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgIHtcbiAgICAgIHN1Y2Nlc3M6IFwicG9zdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgIH0sXG4gICAgeyBzdGF0dXM6IDIwMSB9XG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBFeHRyYWN0IEJlYXJlciB0b2tlbiBmcm9tIHRoZSBBdXRob3JpemF0aW9uIGhlYWRlclxuICAgIGNvbnN0IGF1dGhvcml6YXRpb25IZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiQXV0aG9yaXphdGlvblwiKTtcbiAgICBpZiAoIWF1dGhvcml6YXRpb25IZWFkZXIgfHwgIWF1dGhvcml6YXRpb25IZWFkZXIuc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBpbmZvOiBcIlVuYXV0aG9yaXplZDogQmVhcmVyIHRva2VuIG1pc3Npbmcgb3IgaW52YWxpZFwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBiZWFyZXJUb2tlbiA9IGF1dGhvcml6YXRpb25IZWFkZXIuc3Vic3RyaW5nKDcpOyAvLyBSZW1vdmUgXCJCZWFyZXIgXCIgcHJlZml4XG5cbiAgICAvLyBFeGFtcGxlIG9mIGEgc2ltcGxlIGNoZWNrXG4gICAgaWYgKGJlYXJlclRva2VuICE9PSBcInVLa0JVbTM2bDhVPXcyQ192IUBcIikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGluZm86IFwiVW5hdXRob3JpemVkOiBJbnZhbGlkIEJlYXJlciB0b2tlblwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwb3N0cyA9IGF3YWl0IGRiLnBvc3RzLmZpbmRNYW55KHtcbiAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBcImRlc2NcIixcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGNhdGVnb3J5OiB0cnVlLFxuICAgICAgICBwb3N0VGFnczogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHBvc3RzLFxuICAgICAgICBzdWNjZXNzOiBcIlBvc3RzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogMjAwIH1cbiAgICApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBhdXRob3JpemF0aW9uSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIkF1dGhvcml6YXRpb25cIik7XG4gIGlmICghYXV0aG9yaXphdGlvbkhlYWRlciB8fCAhYXV0aG9yaXphdGlvbkhlYWRlci5zdGFydHNXaXRoKFwiQmVhcmVyIFwiKSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgaW5mbzogXCJVbmF1dGhvcml6ZWQ6IEJlYXJlciB0b2tlbiBtaXNzaW5nIG9yIGludmFsaWRcIiB9LFxuICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGJlYXJlclRva2VuID0gYXV0aG9yaXphdGlvbkhlYWRlci5zdWJzdHJpbmcoNyk7IC8vIFJlbW92ZSBcIkJlYXJlciBcIiBwcmVmaXhcblxuICAvLyBFeGFtcGxlIG9mIGEgc2ltcGxlIGNoZWNrXG4gIGlmIChiZWFyZXJUb2tlbiAhPT0gXCJ1S2tCVW0zNmw4VT13MkNfdiFAXCIpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGluZm86IFwiVW5hdXRob3JpemVkOiBJbnZhbGlkIEJlYXJlciB0b2tlblwiIH0sXG4gICAgICB7IHN0YXR1czogNDAxIH1cbiAgICApO1xuICB9XG5cbiAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKCk7XG4gIGNvbnN0IGlkID0gZm9ybURhdGEuZ2V0KFwiaWRcIikgYXMgc3RyaW5nO1xuICBjb25zdCB0aXRsZSA9IGZvcm1EYXRhLmdldChcInRpdGxlXCIpIGFzIHN0cmluZztcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBmb3JtRGF0YS5nZXQoXCJkZXNjcmlwdGlvblwiKSBhcyBzdHJpbmc7XG4gIGNvbnN0IGNhdGVnb3J5SWQgPSBmb3JtRGF0YS5nZXQoXCJjYXRlZ29yeVwiKSBhcyBzdHJpbmc7XG4gIGNvbnN0IHRhZ3NzID0gZm9ybURhdGEuZ2V0KFwidGFnXCIpIGFzIGFueTtcbiAgY29uc3QgdGFncyA9IHRhZ3NzLnNwbGl0KFwiLFwiKSBhcyBhbnk7XG4gIGNvbnN0IGltYWdlID0gZm9ybURhdGEuZ2V0KFwiaW1hZ2VcIikgYXMgYW55O1xuICBjb25zdCBzZWN0aW9uID0gZm9ybURhdGEuZ2V0KFwic2VjdGlvblwiKSBhcyBhbnk7IC8vIFVzZSBOZXh0LmpzIGJ1aWx0LWluIGZvcm1EYXRhKClcblxuICBjb25zdCBleGlzdGluZ0l0ZW0gPSBhd2FpdCBkYi5wb3N0cy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQsXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgaW1hZ2VOYW1lID0gYCR7RGF0ZS5ub3coKX0tJHtpbWFnZS5uYW1lfWA7IC8vIFVuaXF1ZSBmaWxlbmFtZVxuICB0cnkge1xuICAgIC8vIENyZWF0ZSB0aGUgJ3Bvc3RzJyBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGNvbnN0IGRpclBhdGggPSBgcHVibGljL3VwbG9hZHMvcG9zdHMvYDtcbiAgICBhd2FpdCBmcy5ta2RpcihkaXJQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuICAgIC8vIFNhdmUgdGhlIGltYWdlIHRvIHRoZSAncG9zdHMnIGRpcmVjdG9yeVxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShgJHtkaXJQYXRofSR7aW1hZ2VOYW1lfWAsIGltYWdlLnN0cmVhbSgpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IG1lc3NhZ2U6IFwiSW1hZ2UgdXBsb2FkIGZhaWxlZFwiIH0sXG4gICAgICB7IHN0YXR1czogNDAwIH1cbiAgICApO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBwb3N0ID0gYXdhaXQgZGIucG9zdHMudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgY2F0ZWdvcnk6IHsgY29ubmVjdDogeyBpZDogY2F0ZWdvcnlJZCB9IH0sXG4gICAgICAgIGltYWdlVXJsOiBgL3VwbG9hZHMvcG9zdHMvJHtpbWFnZU5hbWV9YCwgLy8gSW1hZ2UgVVJMIHBhdGhcblxuICAgICAgICBwb3N0VGFnczoge1xuICAgICAgICAgIGNvbm5lY3RPckNyZWF0ZTogdGFncy5tYXAoKHRhZzogYW55KSA9PiAoe1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHRhZyB9LFxuICAgICAgICAgICAgY3JlYXRlOiB7IHRhZ0lkOiB0YWcgfSxcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgaW5jbHVkZTogeyBwb3N0VGFnczogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHByZXZJbWcgPSBleGlzdGluZ0l0ZW0/LmltYWdlVXJsO1xuXG4gICAgYXdhaXQgZnMudW5saW5rKGBwdWJsaWMke3ByZXZJbWd9YCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHBvc3Q6IHBvc3QsXG4gICAgICAgIHN1Y2Nlc3M6IFwiUG9zdCB1cGRhdGUgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDIwMSB9XG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBFeHRyYWN0IEJlYXJlciB0b2tlbiBmcm9tIHRoZSBBdXRob3JpemF0aW9uIGhlYWRlclxuICAgIGNvbnN0IGF1dGhvcml6YXRpb25IZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiQXV0aG9yaXphdGlvblwiKTtcbiAgICBpZiAoIWF1dGhvcml6YXRpb25IZWFkZXIgfHwgIWF1dGhvcml6YXRpb25IZWFkZXIuc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiBcIlVuYXV0aG9yaXplZDogQmVhcmVyIHRva2VuIG1pc3Npbmcgb3IgaW52YWxpZFwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBiZWFyZXJUb2tlbiA9IGF1dGhvcml6YXRpb25IZWFkZXIuc3Vic3RyaW5nKDcpOyAvLyBSZW1vdmUgXCJCZWFyZXIgXCIgcHJlZml4XG5cbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgdG9rZW4gdmFsaWRhdGlvbiBsb2dpYywgZm9yIGV4YW1wbGUsIHVzaW5nIGEgSldUIGxpYnJhcnkgb3IgY2hlY2tpbmcgYWdhaW5zdCBhIGRhdGFiYXNlLlxuXG4gICAgLy8gRXhhbXBsZSBvZiBhIHNpbXBsZSBjaGVja1xuICAgIGlmIChiZWFyZXJUb2tlbiAhPT0gXCJ1S2tCVW0zNmw4VT13MkNfdiFAXCIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiBcIlVuYXV0aG9yaXplZDogSW52YWxpZCBCZWFyZXIgdG9rZW5cIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTm93IHlvdSBjYW4gdXNlIHRoZSAnYmVhcmVyVG9rZW4nIGluIHlvdXIgQVBJIGxvZ2ljXG5cbiAgICAvLyBBc3N1bWluZyB5b3UgaGF2ZSBhICdkYicgb2JqZWN0IGZvciBkYXRhYmFzZSBhY2Nlc3MuXG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKCk7XG4gICAgY29uc3QgaWQgPSBmb3JtRGF0YS5nZXQoXCJpZFwiKSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBwb3N0VG9EZWxldGUgPSBhd2FpdCBkYi5wb3N0cy5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiB7IHBvc3RUYWdzOiB0cnVlIH0sXG4gICAgfSk7XG5cbiAgICBpZiAocG9zdFRvRGVsZXRlICYmIHBvc3RUb0RlbGV0ZS5wb3N0VGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcG9zdFRvRGVsZXRlLnBvc3RUYWdzLm1hcCgodGFnOiBhbnkpID0+XG4gICAgICAgICAgZGIucG9zdFRhZy5kZWxldGUoeyB3aGVyZTogeyBpZDogdGFnLmlkIH0gfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBhd2FpdCBkYi5wb3N0cy5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pOyAvLyBEZWxldGUgdGhlIHBvc3QgYWZ0ZXIgaGFuZGxpbmcgdGFnc1xuXG4gICAgY29uc3QgcHJldkltZyA9IHBvc3RUb0RlbGV0ZT8uaW1hZ2VVcmw7XG4gICAgYXdhaXQgZnMudW5saW5rKGBwdWJsaWMke3ByZXZJbWd9YCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IFwiUG9zdHMgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogMjAwIH1cbiAgICApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJkYiIsIk5leHRSZXNwb25zZSIsImZzIiwidjQiLCJ1dWlkdjQiLCJQT1NUIiwicmVxdWVzdCIsImF1dGhvcml6YXRpb25IZWFkZXIiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsImpzb24iLCJpbmZvIiwic3RhdHVzIiwiYmVhcmVyVG9rZW4iLCJzdWJzdHJpbmciLCJmb3JtRGF0YSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeUlkIiwidGFnIiwidGFnQXJyeSIsInNwbGl0IiwiaW1hZ2UiLCJzZWN0aW9uIiwiaW1hZ2VOYW1lIiwiRGF0ZSIsIm5vdyIsIm5hbWUiLCJkaXJQYXRoIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJ3cml0ZUZpbGUiLCJzdHJlYW0iLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwiZ2VuZXJhdGVJZCIsImZvcm1hdHRlZFRpdGxlIiwicmVwbGFjZSIsInV1aWQiLCJpZCIsInBvc3QiLCJwb3N0cyIsImNyZWF0ZSIsImRhdGEiLCJjYXRlZ29yeSIsImNvbm5lY3QiLCJpbWFnZVVybCIsInBvc3RUYWdzIiwiY29ubmVjdE9yQ3JlYXRlIiwibWFwIiwid2hlcmUiLCJ0YWdJZCIsImluY2x1ZGUiLCJzdWNjZXNzIiwiR0VUIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwiY3JlYXRlZEF0IiwibG9nIiwiUFVUIiwidGFnc3MiLCJ0YWdzIiwiZXhpc3RpbmdJdGVtIiwiZmluZFVuaXF1ZSIsInVwZGF0ZSIsInByZXZJbWciLCJ1bmxpbmsiLCJERUxFVEUiLCJwb3N0VG9EZWxldGUiLCJsZW5ndGgiLCJQcm9taXNlIiwiYWxsIiwicG9zdFRhZyIsImRlbGV0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/(Backend)/api/posts/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.tsx":
/*!************************!*\
  !*** ./src/lib/db.tsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\nconst db = prisma; // const prisma = new PrismaClient();\n // export const db = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUl4QixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUE7QUFDekQsSUFBSUksSUFBcUMsRUFBRUgsZ0JBQWdCRSxNQUFNLEdBQUdBO0FBRTdELE1BQU1FLEtBQUtGLE9BQU8sQ0FFekIscUNBQXFDO0NBRXJDLDRCQUE0QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8vLi9zcmMvbGliL2RiLnRzeD85YzA2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIGFueSBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkO1xufTtcblxuY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KCk7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xuXG5leHBvcnQgY29uc3QgZGIgPSBwcmlzbWE7XG5cbi8vIGNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuLy8gZXhwb3J0IGNvbnN0IGRiID0gcHJpc21hO1xuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIiwiZGIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.tsx\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2F(Backend)%2Fapi%2Fposts%2Froute&page=%2F(Backend)%2Fapi%2Fposts%2Froute&appPaths=&pagePath=private-next-app-dir%2F(Backend)%2Fapi%2Fposts%2Froute.ts&appDir=%2Fhome%2Fwn-061%2FArsalan%2FImage-demo-july3%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fwn-061%2FArsalan%2FImage-demo-july3&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();